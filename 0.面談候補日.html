<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>面談候補日</title>
</head>
<body>
<h3>面談候補日</h3>

<p>日付と時間を入力してください：</p>

<script>
// ①～⑩
const slots = ["①","②","③","④","⑤","⑥","⑦","⑧","⑨","⑩"];

const timeOptions = [
  "10:00～11:00",
  "11:30～12:30",
  "13:00～14:00",
  "14:30～15:30",
  "16:00～17:00",
  "17:30～18:30",
  "18:30～19:30",
  "19:00～20:00",
  "20:30～21:30",
  "21:00～22:00",
  "21:30～22:30",
  "22:00～23:00"
];
</script>

<form id="scheduleForm">
  <div id="inputs"></div>
  <br><br>
  <button type="button" id="generateBtn">生成</button>
  <button type="button" id="copyBtn">コピー</button>
</form>

<textarea id="output" rows="18" cols="50" readonly placeholder="ここに日程候補が表示されます"></textarea>

<script>
// 入力欄を10個生成
const inputsDiv = document.getElementById("inputs");
for(let i=0;i<10;i++){
    const slotLabel = document.createElement("label");
    slotLabel.textContent = slots[i] + " 日付: ";

    const dateInput = document.createElement("input");
    dateInput.type = "date";
    dateInput.id = "date"+i;

    const timeLabel = document.createElement("span");
    timeLabel.textContent = " 時間: ";

    const timeSelect = document.createElement("select");
    timeSelect.id = "time"+i;

    timeOptions.forEach(t=>{
        const opt = document.createElement("option");
        opt.value = t;
        opt.textContent = t;
        timeSelect.appendChild(opt);
    });

    slotLabel.appendChild(dateInput);
    slotLabel.appendChild(timeLabel);
    slotLabel.appendChild(timeSelect);
    inputsDiv.appendChild(slotLabel);
    inputsDiv.appendChild(document.createElement("br"));
}

// 日程生成
document.getElementById("generateBtn").addEventListener("click", ()=>{
    const week = ["日","月","火","水","木","金","土"];
    let items = [];

    for(let i=0;i<10;i++){
        const dateVal = document.getElementById("date"+i).value;
        const timeVal = document.getElementById("time"+i).value;
        if(dateVal){
            items.push({
                dateVal,
                timeVal,
                dateObj: new Date(dateVal)
            });
        }
    }

    // 日付 → 時間の順で昇順ソート
    items.sort((a,b)=>{
        const diff = a.dateObj - b.dateObj;
        if(diff !== 0) return diff;

        const toMinutes = t => {
            const [h,m] = t.split("～")[0].split(":").map(Number);
            return h*60 + m;
        };
        return toMinutes(a.timeVal) - toMinutes(b.timeVal);
    });

    let outputText = "";
    items.forEach((item, idx)=>{
        const d = item.dateObj;
        const month = d.getMonth()+1;
        const day = d.getDate();
        const dayOfWeek = week[d.getDay()];
        outputText += `${slots[idx]} ${month}/${day}(${dayOfWeek}) ${item.timeVal}\n`;
    });

    document.getElementById("output").value = outputText.trim();
});

// コピー機能
document.getElementById("copyBtn").addEventListener("click", async ()=>{
    const text = document.getElementById("output").value;
    if(!text){
        alert("まず日付と時間帯を入力してください");
        return;
    }
    await navigator.clipboard.writeText(text);
    // alert("コピーしました！"); 
});
</script>
</body>
</html>

